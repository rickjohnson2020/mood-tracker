{"ast":null,"code":"import _objectSpread from\"/Users/yanoriku/Documents/personal_project/mood_tracker/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/yanoriku/Documents/personal_project/mood_tracker/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{getMood}from'./api/getMood';import{MoodContent}from'./components/MoodContent';import{PieChart,Pie,Cell}from\"recharts\";import useMedia from'use-media';import'./Top.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var COLORS=['#FFCC33','#98FB98','#DDA0DD','#D3D3D3'];var RADIAN=Math.PI/180;var renderCustomizedLabel=function renderCustomizedLabel(_ref){var cx=_ref.cx,cy=_ref.cy,midAngle=_ref.midAngle,innerRadius=_ref.innerRadius,outerRadius=_ref.outerRadius,percent=_ref.percent,index=_ref.index;var radius=innerRadius+(outerRadius-innerRadius)*0.5;var x=cx+radius*Math.cos(-midAngle*RADIAN);var y=cy+radius*Math.sin(-midAngle*RADIAN);return/*#__PURE__*/_jsx(\"text\",{x:x,y:y,fill:\"white\",textAnchor:x>cx?'start':'end',dominantBaseline:\"central\",children:\"\".concat((percent*100).toFixed(0),\"%\")});};export var Top=function Top(){var initialState={id:'',date:'',mood:''};var _useState=useState(initialState),_useState2=_slicedToArray(_useState,2),mood=_useState2[0],setMood=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];useEffect(function(){getMood().then(function(d){setMood(d);setLoading(false);}).catch(function(err){return console.log(err);});},[]);// added\nvar data=[{name:'rad',count:0},{name:'good',count:0},{name:'meh',count:0},{name:'bad',count:0}];// ここにmap関数で取り出し、個数を数える\nArray.from(mood).map(function(value){if(value.mood==='rad'){data[0].count+=1;}else if(value.mood==='good'){data[1].count+=1;}else if(value.mood==='meh'){data[2].count+=1;}else{data[3].count+=1;}});var isWide=useMedia({minWidth:'1000px'});return/*#__PURE__*/_jsx(\"div\",{children:loading?/*#__PURE__*/_jsx(\"h1\",{children:\"loading...\"}):isWide?/*#__PURE__*/_jsxs(\"div\",{className:\"whole-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"Top\",children:Array.from(mood).map(function(d){return/*#__PURE__*/_jsx(MoodContent,_objectSpread({},d));})}),/*#__PURE__*/_jsxs(\"div\",{className:\"pie-chart-parent\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"label\",children:\"rad\"}),/*#__PURE__*/_jsx(\"div\",{className:\"label-color1\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"label\",children:\"good\"}),/*#__PURE__*/_jsx(\"div\",{className:\"label-color2\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"label\",children:\"meh\"}),/*#__PURE__*/_jsx(\"div\",{className:\"label-color3\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"label\",children:\"bad\"}),/*#__PURE__*/_jsx(\"div\",{className:\"label-color4\"})]}),/*#__PURE__*/_jsx(PieChart,{className:\"pie-chart-child\",width:400,height:400,children:/*#__PURE__*/_jsx(Pie,{data:data,cx:200,cy:200,labelLine:false,label:renderCustomizedLabel,outerRadius:150,fill:\"#8884d8\",dataKey:\"count\",children:data.map(function(entry,index){return/*#__PURE__*/_jsx(Cell,{fill:COLORS[index%COLORS.length]},\"cell-\".concat(index));})})})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"whole-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"PhoneTop\",children:Array.from(mood).map(function(d){return/*#__PURE__*/_jsx(MoodContent,_objectSpread({},d));})}),/*#__PURE__*/_jsxs(\"div\",{className:\"PhonePieChartParent\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"label\",children:\"rad\"}),/*#__PURE__*/_jsx(\"div\",{className:\"label-color1\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"label\",children:\"good\"}),/*#__PURE__*/_jsx(\"div\",{className:\"label-color2\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"label\",children:\"meh\"}),/*#__PURE__*/_jsx(\"div\",{className:\"label-color3\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"label\",children:\"bad\"}),/*#__PURE__*/_jsx(\"div\",{className:\"label-color4\"})]}),/*#__PURE__*/_jsx(PieChart,{className:\"pie-chart-child\",width:400,height:400,children:/*#__PURE__*/_jsx(Pie,{data:data,cx:200,cy:200,labelLine:false,label:renderCustomizedLabel,outerRadius:150,fill:\"#8884d8\",dataKey:\"count\",children:data.map(function(entry,index){return/*#__PURE__*/_jsx(Cell,{fill:COLORS[index%COLORS.length]},\"cell-\".concat(index));})})})]})]})});};","map":{"version":3,"sources":["/Users/yanoriku/Documents/personal_project/mood_tracker/frontend/src/Top.js"],"names":["React","useState","useEffect","getMood","MoodContent","PieChart","Pie","Cell","useMedia","COLORS","RADIAN","Math","PI","renderCustomizedLabel","cx","cy","midAngle","innerRadius","outerRadius","percent","index","radius","x","cos","y","sin","toFixed","Top","initialState","id","date","mood","setMood","loading","setLoading","then","d","catch","err","console","log","data","name","count","Array","from","map","value","isWide","minWidth","entry","length"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { getMood } from './api/getMood'\nimport { MoodContent } from './components/MoodContent'\nimport { PieChart, Pie, Cell } from \"recharts\";\nimport useMedia from 'use-media';\n\nimport './Top.css'\n\n\nconst COLORS = ['#FFCC33', '#98FB98', '#DDA0DD', '#D3D3D3'];\n\nconst RADIAN = Math.PI / 180;\nconst renderCustomizedLabel = ({ cx, cy, midAngle, innerRadius, outerRadius, percent, index }: any) => {\n  const radius = innerRadius + (outerRadius - innerRadius) * 0.5;\n  const x = cx + radius * Math.cos(-midAngle * RADIAN);\n  const y = cy + radius * Math.sin(-midAngle * RADIAN);\n\n  return (\n\n      <text x={x} y={y} fill=\"white\" textAnchor={x > cx ? 'start' : 'end'} dominantBaseline=\"central\">\n        {`${(percent * 100).toFixed(0)}%`}\n      </text>\n\n  );\n};\n\n\n\n\n\nexport const Top = () => {\n  const initialState = {\n    id: '',\n    date: '',\n    mood: '',\n  }\n\n  const[mood, setMood] = useState(initialState);\n  const[loading, setLoading] = useState(true);\n\n\n  useEffect(() => {\n    getMood()\n    .then(d => {\n      setMood(d)\n      setLoading(false)\n    })\n    .catch(err => console.log(err));\n  },[])\n\n  // added\n  let data = [\n    { name: 'rad', count: 0 },\n    { name: 'good', count: 0 },\n    { name: 'meh', count: 0 },\n    { name: 'bad', count: 0 },\n  ];\n\n  // ここにmap関数で取り出し、個数を数える\n  Array.from(mood).map((value) => {\n    if (value.mood === 'rad') {\n      data[0].count += 1;\n    }else if(value.mood === 'good') {\n      data[1].count += 1;\n    }else if(value.mood === 'meh') {\n      data[2].count += 1;\n    }else{\n      data[3].count += 1;\n    }\n  });\n\n  const isWide = useMedia({minWidth: '1000px'});\n\n  return(\n    <div>\n      {\n        loading ?\n        <h1>loading...</h1>\n        :\n\n        (\n          isWide ?\n          <div className='whole-body'>\n\n            <div className='Top'>\n            {Array.from(mood).map( d => <MoodContent {...d}  /> )}\n            </div>\n\n            <div className='pie-chart-parent'>\n              <div>\n                <h1 className='label'>rad</h1>\n                <div className='label-color1'></div>\n                <h1 className='label'>good</h1>\n                <div className='label-color2'></div>\n                <h1 className='label'>meh</h1>\n                <div className='label-color3'></div>\n                <h1 className='label'>bad</h1>\n                <div className='label-color4'></div>\n              </div>\n\n              <PieChart className='pie-chart-child' width={400} height={400}>\n                <Pie\n                  data={data}\n                  cx={200}\n                  cy={200}\n                  labelLine={false}\n                  label={renderCustomizedLabel}\n                  outerRadius={150}\n                  fill=\"#8884d8\"\n                  dataKey=\"count\"\n                >\n                  {data.map((entry, index) => (\n                    <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\n                  ))}\n                </Pie>\n              </PieChart>\n\n            </div>\n\n          </div>\n          :\n          <div className='whole-body'>\n\n            <div className='PhoneTop'>\n            {Array.from(mood).map( d => <MoodContent {...d}  /> )}\n            </div>\n\n            <div className='PhonePieChartParent'>\n              <div>\n                <h1 className='label'>rad</h1>\n                <div className='label-color1'></div>\n                <h1 className='label'>good</h1>\n                <div className='label-color2'></div>\n                <h1 className='label'>meh</h1>\n                <div className='label-color3'></div>\n                <h1 className='label'>bad</h1>\n                <div className='label-color4'></div>\n              </div>\n\n              <PieChart className='pie-chart-child' width={400} height={400}>\n                <Pie\n                  data={data}\n                  cx={200}\n                  cy={200}\n                  labelLine={false}\n                  label={renderCustomizedLabel}\n                  outerRadius={150}\n                  fill=\"#8884d8\"\n                  dataKey=\"count\"\n                >\n                  {data.map((entry, index) => (\n                    <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\n                  ))}\n                </Pie>\n              </PieChart>\n\n            </div>\n\n          </div>\n\n        )\n      }\n    </div>\n  )\n\n}\n"]},"metadata":{},"sourceType":"module"}